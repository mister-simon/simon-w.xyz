---
title: "Fixing Overflow"
description: "I noticed that code blocks were overflowing at narrower screen sizes. Let's debug that."
date: '2024-02-02'
navigation:
  title: 'Fixing Code Overflow'
  icon: 'ðŸªš'
---

Checking out a previous post containing code blocks on my phone I realised there was a lot of overflow happening. Let's fix that.

<!--more-->

Let's get stuck into debugging :content-link{to="doing-more-stuff"}[this previous post]'s layout issues.

---

Immediate tangent... In writing up the intro above, I learnt several things:

1. Nuxt Content's [Vue Components](https://content.nuxt.com/usage/markdown#vue-components) have to be placed in the `components/content` directory if they're not global components. I assumed that `<NuxtLink />` would be a global component... But apparently not. I suppose this comes down to the whole auto-import stuff that happens behind the scenes not happening for this sort of parsed / generated markup.
2. Once again I've run into something completely undocumented... If you use the [inline component]{https://content.nuxt.com/usage/markdown#vue-components} markup and you want to pass something into the component slot, there is no documentation on how to do that.
   - I discovered through gut feel that the markup is actually this:
     ```md
     Nice :content-link{to="/"}[example link] mate.
     ```
   - We have `:content-link` which begins inlining `components/content/ContentLink.vue`. Which is a component I've made to wrap `<NuxtLink />`.
   - Next we have `{to="/"}` which passes the props / attributes to the component.
   - Then, crucially we have `[example link]` which encloses the inline text to be passed to the slot. It took quite a few experiments to find that out.
   - Anything after those brackets is considered regular markup again.

---

Ok... Back on topic. What is happening with the code / text overflow.

I ran a quick test by adding a white border to all of the article contents and removing everything relating to prose styling. I've also added `max-width: fit-content` to the `pre.shiki` tags. We get something that looks like this:

![A visualisation of the space taken up by the longest code block](/assets/content/fixing-overflow-visualisation.png)

The screenshot shows a point at which the width of the prose content section is approaching the natural width of the longest code block in the article.

As soon as we pass that point, I would expect the prose to continue shrinking, while the code block stays at it's full width... At a certain point, which appears to be the width of that code block it just sticks.

**Hold on while I turn off Nuxt Devtools, which has been interfering with the min page width...**

*... foreshadowing ...*

I continued my investigation by nuking as many of the `display` utilities I'd applied along the way. I'm using a lot of grid, and as you would expect there are some things going on with how widths are handled + cascade up the dom from wider elements within.

This all [sparked a memory of something I saw recently](https://youtu.be/cH8VbLM1958) about adding `min-width: 0` globally to everything as part of your CSS reset. And sure enough, simply throwing that on my prose wrapper solves the issue!

![The wide code block maxing out at the page's width and showing a scrollbar for the longer lines of code within](/assets/content/fixing-overflow-sorted.png)

Success.